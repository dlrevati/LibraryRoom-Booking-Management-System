-- MySQL Script generated by MySQL Workbench
-- 10/28/15 19:46:28
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
SHOW WARNINGS;
-- -----------------------------------------------------
-- Schema meeting
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `meeting` ;

-- -----------------------------------------------------
-- Schema meeting
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `meeting` DEFAULT CHARACTER SET latin1 ;
SHOW WARNINGS;
USE `meeting` ;

-- -----------------------------------------------------
-- Table `meeting`.`address`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `meeting`.`address` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `meeting`.`address` (
  `address_id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `door_number` VARCHAR(20) NOT NULL COMMENT '',
  `address_line_1` VARCHAR(45) NOT NULL COMMENT '',
  `address_line_2` VARCHAR(45) NOT NULL COMMENT '',
  PRIMARY KEY (`address_id`)  COMMENT '')
ENGINE = InnoDB;

SHOW WARNINGS;

INSERT INTO address (address_id, door_number, address_line_1, address_line_2) VALUES (1,'1212','UT Drive','Park'),(2,'3452','Smith Lane','Concord'),(3,'300','Drake Avenue','Shamrock'),(4,'121','Keith Avenue','Smahrock'),(5,'450','Kirk Drive','Welmington'),(6,'920','Smith Lane','Welmington '),(7,'111','Ramsay Avenue','Balentine');
-- -----------------------------------------------------
-- Table `meeting`.`master_user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `meeting`.`master_user` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `meeting`.`master_user` (
  `u_id` INT(11) NOT NULL AUTO_INCREMENT COMMENT '',
  `address_id` INT NOT NULL COMMENT '',
  `first_name` VARCHAR(30) NULL DEFAULT NULL COMMENT '',
  `last_name` VARCHAR(50) NULL DEFAULT NULL COMMENT '',
  `email` varchar(90) NULL DEFAULT NULL COMMENT '',
  `phone` VARCHAR(20) NULL DEFAULT NULL COMMENT '',
  `role` VARCHAR(15) NULL DEFAULT NULL COMMENT '',
  PRIMARY KEY (`u_id`)  COMMENT '',
   KEY master_user_index (u_id,first_name,last_name,email,phone,role))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;
 select * from master_user;

SHOW WARNINGS;
CREATE INDEX `fk_master_user_address1_idx` ON `meeting`.`master_user` (`address_id` ASC)  COMMENT '';

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `meeting`.`admin`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `meeting`.`admin` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `meeting`.`admin` (
  `admin_id` INT(11) NOT NULL AUTO_INCREMENT COMMENT '',
  `u_id` INT(11) NOT NULL COMMENT '',
  `password` VARCHAR(40) NULL DEFAULT NULL COMMENT '',
  `designation` VARCHAR(20) NULL COMMENT '',
  PRIMARY KEY (`admin_id`)  COMMENT '')
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

SHOW WARNINGS;
CREATE INDEX `stud_id` ON `meeting`.`admin` (`u_id` ASC)  COMMENT '';

SHOW WARNINGS;
CREATE UNIQUE INDEX `u_id_UNIQUE` ON `meeting`.`admin` (`u_id` ASC)  COMMENT '';
INSERT INTO admin (admin_id, u_id, password, designation) VALUES (1,1,'pass','floor manager'),(2,2,'pass','floor manager'),(3,3,'pass','manager');
 select * from admin;
 
 
 
SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `meeting`.`user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `meeting`.`user` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `meeting`.`user` (
  `user_id` INT(11) NOT NULL AUTO_INCREMENT COMMENT '',
  `u_id` INT(11) NOT NULL COMMENT '',
  `password` VARCHAR(40) NULL DEFAULT NULL COMMENT '',
  PRIMARY KEY (`user_id`)  COMMENT '')
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

SHOW WARNINGS;
CREATE INDEX `u_id` ON `meeting`.`user` (`u_id` ASC)  COMMENT '';

select * from user;

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `meeting`.`floor`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `meeting`.`floor` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `meeting`.`floor` (
  `floor_id` INT(11) NOT NULL AUTO_INCREMENT COMMENT '',
  `floor_number` SMALLINT(6) NULL DEFAULT NULL COMMENT '',
  `start_time` INT(11) NOT NULL DEFAULT '0' COMMENT '',
  `end_time` INT(11) NOT NULL DEFAULT '0' COMMENT '',
  `admin_id` INT(11) NOT NULL COMMENT '',
  PRIMARY KEY (`floor_id`)  COMMENT '')
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

SHOW WARNINGS;
CREATE INDEX `fk_floor_admin1_idx` ON `meeting`.`floor` (`admin_id` ASC)  COMMENT '';
 
 select * from floor;
 
SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `meeting`.`room`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `meeting`.`room` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `meeting`.`room` (
  `room_id` INT(11) NOT NULL AUTO_INCREMENT COMMENT '',
  `room_number` INT(11) NULL DEFAULT NULL COMMENT '',
  `capactity` SMALLINT(6) NULL DEFAULT NULL COMMENT '',
  `isprojectorAvail` TINYINT(1) NULL DEFAULT NULL COMMENT '',
  `isWhiteBoardAvail` TINYINT(1) NULL DEFAULT NULL COMMENT '',
  `isNetworkEnabled` TINYINT(1) NULL DEFAULT NULL COMMENT '',
  `floor_id` INT(11) NOT NULL COMMENT '',
    PRIMARY KEY (`room_id`)  COMMENT '')
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

SHOW WARNINGS;
CREATE INDEX `floor_id_UNIQUE` ON `meeting`.`room` (`floor_id` ASC)  COMMENT '';

SHOW WARNINGS;
CREATE INDEX `fk_room_floor1_idx` ON `meeting`.`room` (`floor_id` ASC)  COMMENT '';
select * from room;
INSERT INTO room (room_id, room_number, capactity, isprojectorAvail, isWhiteBoardAvail, isNetworkEnabled, floor_id)
VALUES (11,111,12,1,0,1,212),(12,112,5,1,1,1,212),(13,113,12,1,1,1,212),(21,211,12,1,1,1,213),(22,222,12,1,1,1,213),(23,223,5,1,0,0,213),(31,311,12,0,0,1,214),(32,312,5,0,1,0,214),(33,313,12,1,1,1,214);

SHOW WARNINGS;

drop table room;


-- -----------------------------------------------------
-- Table `meeting`.`meeting_table`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `meeting`.`meeting_table` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `meeting`.`meeting_table` (
  `meeting_id` INT(11) NOT NULL AUTO_INCREMENT COMMENT '',
  `start_time` INT(11) NOT NULL DEFAULT '0' COMMENT '',
  `end_time` INT(11) NOT NULL DEFAULT '0' COMMENT '',
  `agenda` VARCHAR(100) NULL DEFAULT NULL COMMENT '',
  `notes` VARCHAR(100) NULL DEFAULT NULL COMMENT '',
  `date` INT(11) NOT NULL DEFAULT '0' COMMENT '',
  `user_user_id` INT(11) NOT NULL COMMENT '',
  `room_room_id` INT(11) NOT NULL COMMENT '',
  PRIMARY KEY (`meeting_id`)  COMMENT '')
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

SHOW WARNINGS;
CREATE INDEX `fk_meeting_table_user1_idx` ON `meeting`.`meeting_table` (`user_user_id` ASC)  COMMENT '';

SHOW WARNINGS;
CREATE INDEX `fk_meeting_table_room1_idx` ON `meeting`.`meeting_table` (`room_room_id` ASC)  COMMENT '';

SHOW WARNINGS;

INSERT INTO meeting_table (meeting_id, start_time, end_time, agenda, notes, date, user_user_id, room_room_id) 
VALUES (1231,1100,1200,'Project planning','1) abc 2) cde 3) def ) xyz',1312015,1,21),(1241,1500,1600,'Team Activity','1) abc 2) cde 3) def ) xyz',1312015,1,22),(1251,1230,1330,'Technical ','1) abc 2) cde 3) def ) xyz',1312015,2,21);

select * from meeting_table ;

-- -----------------------------------------------------
-- Table `meeting`.`attendance_table`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `meeting`.`attendance_table` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `meeting`.`attendance_table` (
  `meeting_id` INT(11) NOT NULL COMMENT '',
  `stud_id` INT(11) NULL DEFAULT NULL COMMENT '',
  `IsParticipantAvail` TINYINT(1) NULL DEFAULT NULL COMMENT '',
  PRIMARY KEY (`meeting_id`)  COMMENT '')
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

SHOW WARNINGS;
CREATE INDEX `stud_id` ON `meeting`.`attendance_table` (`stud_id` ASC)  COMMENT '';

SHOW WARNINGS;
CREATE INDEX `meeting_id` ON `meeting`.`attendance_table` (`meeting_id` ASC)  COMMENT '';

SHOW WARNINGS;
desc attendance_table;
select * from attendance_table;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

desc master_user;
desc meeting_table;

 ALTER TABLE meeting.meeting_table
  MODIFY COLUMN end_time time;
  ALTER TABLE meeting.meeting_table
  MODIFY COLUMN start_time time ;
  
        ALTER TABLE meeting.meeting_table
  MODIFY COLUMN meeting_table.date date;
  
ALTER TABLE meeting.floor
  MODIFY COLUMN start_time time;
  ALTER TABLE meeting.floor
  MODIFY COLUMN end_time time;
  
  select * from master_user;
  INSERT INTO `master_user` (`u_id`, `address_id`, `first_name`, `last_name`, `email`, `phone`, `role`) 

VALUES (1,1,'Rajiv','Shukla','raj@gmail.com','999999','floor manager'),

(2,5,'Vinodh ','Khanna','vin@gmail.com','999999','floor manager'),
(3,3,'Sim','Patel','sim@gmail.com','999999','manager')

,(4,2,'Smitha','Rao','smi@gmail.com','999999','student'),

(5,4,'Deep','Rao','dee@gmail.com','999999','student'),

(6,6,'Sai','Vadla','sai@gmail.com','989808','student');
  
  INSERT INTO `floor` (`floor_id`, `floor_number`, `start_time`, `end_time`, `admin_id`) VALUES
(212, 1, '00:08:00', '00:21:30', 1),
(213, 2, '00:09:00', '00:23:30', 2),
(214, 3, '00:08:00', '00:23:00', 3);

INSERT INTO `user` (`user_id`, `u_id`, `password`) VALUES (1,4,'pass'),(2,5,'pass'),(3,6,'pass');

  INSERT INTO `meeting_table` (`meeting_id`, `start_time`, `end_time`, `agenda`, `notes`, `date`, `user_user_id`, `room_room_id`) VALUES
(123, '10:30:00', '12:30:00', 'Project planning', '1) abc 2) cde 3) def )\r\nxyz', '2015-01-31', 1, 21),
(124, '11:00:00', '13:00:00', 'Team Activity', '1) abc 2) cde 3) def )\r\nxyz', '2015-01-31', 1, 22),
(125, '11:30:00', '13:30:00', 'Technical ', '1) abc 2) cde 3) def ) xyz', '2015-01-31', 2, 21);
  
select * from meeting_table;
desc meeting_table;


select * from user;

select * from meeting.user;

select * from meeting.master_user;

select * from meeting.room;

